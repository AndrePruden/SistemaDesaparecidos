<app-header></app-header>
<main class="registro-container">
  <form (ngSubmit)="onSubmit()" #formularioRegistro="ngForm" novalidate>
    <h2>Registro de Usuario</h2>

    <div class="form-row">
      <label for="nombre">Nombre *</label>
      <input 
        type="text" 
        id="nombre" 
        name="nombre" 
        [(ngModel)]="usuario.nombre"
        (blur)="onNombreChange()"
        (input)="onNombreChange()"
        required 
        class="form-control"
        [class.error]="errores.nombre"
        placeholder="Ej: Juan Pérez"
        maxlength="50" />
      <div *ngIf="errores.nombre" class="error-message">
        {{ errores.nombre }}
      </div>
    </div>
    <div class="form-row">
      <label for="ci">CI *</label>
      <input 
        type="text" 
        id="ci" 
        name="ci" 
        [(ngModel)]="usuario.ci"
        (blur)="onCIChange()"
        (input)="onCIChange()"
        required 
        class="form-control"
        [class.error]="errores.ci"
        placeholder="Ej: 12345678"
        maxlength="10" />
      <div *ngIf="errores.ci" class="error-message">
        {{ errores.ci }}
      </div>
    </div>
    <div class="form-row">
      <label for="fechaNacimiento">Fecha de Nacimiento *</label>
      <input 
        type="date" 
        id="fechaNacimiento" 
        name="fechaNacimiento"
        [(ngModel)]="usuario.fechaNacimiento" 
        (blur)="onFechaNacimientoChange()"
        (change)="onFechaNacimientoChange()"
        required 
        class="form-control"
        [class.error]="errores.fechaNacimiento" />
      <div *ngIf="errores.fechaNacimiento" class="error-message">
        {{ errores.fechaNacimiento }}
      </div>
    </div>
    <div class="form-row">
      <label for="celular">Celular *</label>
      <input 
        type="tel" 
        id="celular" 
        name="celular" 
        [(ngModel)]="usuario.celular"
        (blur)="onCelularChange()"
        (input)="onCelularChange()"
        required 
        class="form-control"
        [class.error]="errores.celular"
        placeholder="Ej: 71234567"
        maxlength="8" />
      <div *ngIf="errores.celular" class="error-message">
        {{ errores.celular }}
      </div>
    </div>
    <div class="form-row">
      <label for="direccion">Dirección *</label>
      <input 
        type="text" 
        id="direccion" 
        name="direccion" 
        [(ngModel)]="usuario.direccion"
        (blur)="onDireccionChange()"
        (input)="onDireccionChange()"
        required 
        class="form-control"
        [class.error]="errores.direccion"
        placeholder="Ej: Av. Libertador #123"
        maxlength="200" />
      <div *ngIf="errores.direccion" class="error-message">
        {{ errores.direccion }}
      </div>
    </div>
    <div class="form-row">
      <label for="email">Correo electrónico *</label>
      <input 
        type="email" 
        id="email" 
        name="email" 
        [(ngModel)]="usuario.email"
        (blur)="onEmailChange()"
        (input)="onEmailChange()"
        required 
        class="form-control"
        [class.error]="errores.email"
        placeholder="correo@ejemplo.com" />
      <div *ngIf="errores.email" class="error-message">
        {{ errores.email }}
      </div>
    </div>
    <div class="form-row">
      <label for="password">Contraseña *</label>
      <div class="password-wrapper">
        <input 
          [type]="mostrarPassword ? 'text' : 'password'" 
          id="password"
          name="password" 
          [(ngModel)]="usuario.password" 
          (blur)="onPasswordChange()"
          (input)="onPasswordChange()"
          required
          class="form-control"
          [class.error]="errores.password"
          placeholder="Ingresa una contraseña segura" />
        <button type="button" (click)="togglePasswordVisibility()" class="btn-toggle-password">
          {{ mostrarPassword ? 'Ocultar' : 'Mostrar' }}
        </button>
      </div>
      <div *ngIf="errores.password" class="error-message">
        {{ errores.password }}
      </div>
    </div>
    <div class="form-row-checkbox">
      <input type="checkbox" id="notificaciones" name="notificaciones"
             [(ngModel)]="usuario.notificaciones" />
      <label for="notificaciones">Deseo recibir notificaciones</label>
    </div>
    <button type="submit" class="btn-registrar" [disabled]="tieneErrores()">
      Registrarse
    </button>
    <div *ngIf="mensaje" class="mensaje">{{ mensaje }}</div>
  </form>
</main>
<app-footer></app-footer>